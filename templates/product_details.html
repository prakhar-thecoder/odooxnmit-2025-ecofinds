{% extends "base.html" %}
{% block content %}

<div class="min-h-screen bg-gray-50 text-gray-800 flex flex-col items-center px-6 py-10">

  <!-- Product Title -->
  <h1 class="text-2xl font-bold mb-6">{{ product.title }}</h1>

  <!-- ðŸ–¼ï¸ Product Image with Dots -->
  <div class="w-full max-w-lg bg-white border rounded-xl shadow p-4 flex flex-col items-center">
    <div id="productImageWrapper" class="relative w-full flex items-center justify-center">
      <img id="productImage" 
           src="{{ url_for('static', filename=product.product_image) }}" 
           alt="{{ product.title }}" 
           class="max-h-80 w-auto object-contain" />
    </div>

    <!-- Dots -->
    <div class="flex justify-center mt-4 space-x-2">
      <button class="dot w-3 h-3 rounded-full bg-green-600" data-img="{{ url_for('static', filename=product.product_image) }}"></button>
      {% if product.product_image_2 %}
      <button class="dot w-3 h-3 rounded-full bg-gray-400" data-img="{{ url_for('static', filename=product.product_image_2) }}"></button>
      {% endif %}
    </div>
  </div>

  <!-- Product Info -->
  <div class="w-full max-w-lg mt-6 bg-white border rounded-xl shadow p-6 space-y-2 text-left">
  <p><strong>Category:</strong> {{ product.category }}</p>
  <p><strong>Description:</strong> {{ product.description }}</p>
  <p class="text-green-600 font-bold text-lg">Price : â‚¹{{ product.price }}</p>

  <!-- Add to Cart -->
  <a href="{{ url_for('add_to_cart', product_id=product.product_id) }}" 
    class="block w-full mt-6 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg text-center font-semibold transition">
    Add to Cart
  </a>
</div>

</div>

<!-- Script for Dot Image Switching -->
<script>
  const dots = document.querySelectorAll('.dot');
  const productImage = document.getElementById('productImage');

  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      // change main image
      productImage.src = dot.dataset.img;
      // update active dot
      dots.forEach(d => d.classList.remove('bg-green-600'));
      dots.forEach(d => d.classList.add('bg-gray-400'));
      dot.classList.add('bg-green-600');
    });
  });
</script>

{% endblock %}
